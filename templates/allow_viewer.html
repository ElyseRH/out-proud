{% extends "base.html" %}

{% block content %}

{% load crispy_forms_tags %}


<div class="container-fluid col-md-4">
    <h2 class="heading">Form to allow viewer.</h2>

    <form class="viewer-form" method="post">
        {{ viewer_form | crispy }}
        {% csrf_token %}
        <button type="submit" class="btn btn-signup btn-md">Submit</button>
    </form>

    <script>
        emailjs.send("service_0muuuls", "template_xx57dpj", ".viewer-form")
            .then(function (response) {
                console.log('SUCCESS!', response.status, response.text);
            }, function (error) {
                console.log('FAILED...', error);
            });
    </script>

    <script>
        emailjs.send("service_0muuuls", "template_xx57dpj", {
                "first_name": viewer-form.name.value,
                "email": viewer-form.email.value,
                "shown_name": viewer-form.shown_name.value
            })
            .then(
                function (response) {
                    console.log("SUCCESS", response);
                },
                function (error) {
                    console.log("FAILED", error);
                }
            );
        return false;
    </script>


</div>

{%endblock%}