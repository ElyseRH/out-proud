{% extends "base.html" %}

{% block content %}

{% load crispy_forms_tags %}

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
</script>
<script type="text/javascript">
    (function() {
        emailjs.init("z4V96jMbCXKPuaPWE");
    })();
</script>
<script type="text/javascript">
    window.onload = function() {
        document.getElementById('viewer-form').addEventListener('submit', function(event) {
            event.preventDefault();
            emailjs.sendForm('service_0muuuls', 'viewer_form_template', this)
                .then(function() {
                    console.log('SUCCESS!', response.status, response.text);
                }, function(error) {
                    console.log('FAILED...', error);
                });
        });
    }
</script>

<div class="container-fluid col-md-4">
    <h2 class="heading">Form to allow viewer.</h2>
    <form id="viewer-form" method="POST">
        {{ viewer_form | crispy }}
        {% csrf_token %}
        <button type="submit" class="btn btn-signup btn-md submit-form mt-2">Submit</button>
    </form>
</div>

{%endblock%}